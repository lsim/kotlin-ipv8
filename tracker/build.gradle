plugins {
    id("application")
    id("kotlin")
}

//apply plugin: 'application'
//
//apply plugin: 'kotlin'

mainClassName = 'nl.tudelft.ipv8.tracker.TrackerKt'

dependencies {
    implementation project(':ipv8-jvm')

    // Kotlin
    implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.3'
    implementation "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"

    // Logging
    implementation 'io.github.oshai:kotlin-logging-jvm:5.1.0'
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions.jvmTarget = "17"
    kotlinOptions.freeCompilerArgs += [
        "-opt-in=kotlin.Experimental,kotlin.ExperimentalUnsignedTypes"
    ]
}

//tasks.withType(Jar) {
//    manifest {
//        attributes["Main-Class"] = "nl.tudelft.ipv8.tracker.TrackerKt"
//    }
//}

run {
    systemProperties System.getProperties()
}
